<div class="cart-container">
  <h2>Il tuo carrello</h2>

  <div *ngIf="loading">Caricamento...</div>
  <div *ngIf="error" class="error">{{ error }}</div>

  <div *ngIf="cart && cart.cart_items.length > 0">
    <table>
      <thead>
        <tr>
          <th>Prodotto</th>
          <th>Prezzo</th>
          <th>Quantità</th>
          <th>Totale</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of cart.cart_items">
          <td>
            <a [routerLink]="['/products', item.product.id]">
              {{ item.product.name }}
            </a>
          </td>
          <td>€ {{ item.unit_price | number:'1.2-2' }}</td>
          <td>{{ item.quantity }}</td>
          <td>€ {{ (item.unit_price * item.quantity) | number:'1.2-2' }}</td>
          <td>
            <button (click)="removeItem(item)">Rimuovi</button>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="cart-total">
      Totale: <strong>€ {{ getTotal() | number:'1.2-2' }}</strong>
    </div>
    <button class="btn-checkout" (click)="goToCheckout()">Procedi al checkout</button>
  </div>

  <div *ngIf="cart && cart.cart_items.length === 0">
    <p>Il carrello è vuoto.</p>
  </div>
</div>
